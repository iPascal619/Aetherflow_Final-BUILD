<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AetherFlow - Patients</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="healthcare-mode">
    <div class="container">
        <header>
            <nav class="navbar">
                <div class="nav-brand">
                    <img src="images/logo.svg" alt="AetherFlow Logo" class="logo">
                    <span class="brand-name">AetherFlow</span>
                </div>
                <ul class="healthcare-nav-links">
                    <li><a href="healthcare-dashboard.html">Dashboard</a></li>
                    <li><a href="patients.html" class="active">Patients</a></li>
                    <li><a href="assessments.html">Assessments</a></li>
                    <li><a href="reports.html">Reports</a></li>
                    <li><a href="settings.html">Settings</a></li>
                </ul>
                <div class="provider-info">
                    <div class="provider-details">
                        <span class="provider-name">Dr. Sarah Johnson</span>
                        <span class="provider-role">Licensed Clinical Psychologist</span>
                    </div>
                    <button class="logout-btn">Logout</button>
                </div>
            </nav>
        </header>

        <main class="main-content">
            <div class="page-header">
                <h1>Patient Management</h1>
                <p class="page-description">Manage and monitor your patients' sickle cell disease assessments</p>
                <button class="btn btn-primary" onclick="addNewPatient()">
                    <span>+ Add New Patient</span>
                </button>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <h2>Search & Filter</h2>
                </div>
                
                <div class="filter-grid">
                    <div class="input-group">
                        <input type="text" id="searchInput" class="form-input" 
                               placeholder="üîç Search by name, ID, or phone..." 
                               onkeyup="filterPatients()">
                    </div>
                    <div class="input-group">
                        <select id="riskFilter" class="form-select" onchange="filterPatients()">
                            <option value="">All Risk Levels</option>
                            <option value="low">Low Risk</option>
                            <option value="medium">Medium Risk</option>
                            <option value="high">High Risk</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <select id="ageFilter" class="form-select" onchange="filterPatients()">
                            <option value="">All Ages</option>
                            <option value="0-18">0-18 years</option>
                            <option value="19-35">19-35 years</option>                            <option value="36-50">36-50 years</option>
                            <option value="51+">51+ years</option>
                        </select>
                    </div>
                    <div class="button-group">
                        <button class="btn btn-outline" onclick="clearFilters()">
                            <span>Clear Filters</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <h2>Patient Statistics</h2>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-content">
                            <h3 id="totalPatientsCount">0</h3>
                            <p>Total Patients</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üü¢</div>
                        <div class="stat-content">
                            <h3 id="lowRiskCount">0</h3>
                            <p>Low Risk</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">üü°</div>
                        <div class="stat-content">
                            <h3 id="mediumRiskCount">0</h3>
                            <p>Medium Risk</p>
                        </div>
                    </div>
                    
                    <div class="stat-card high-risk">
                        <div class="stat-icon">üî¥</div>
                        <div class="stat-content">
                            <h3 id="highRiskCount">0</h3>
                            <p>High Risk</p>
                        </div>
                    </div>
                </div>

                <!-- Patient List -->
                <div class="dashboard-section">
                    <div class="section-header">
                        <h2>Patient Registry</h2>
                        <div class="view-controls">
                            <button class="btn btn-outline" onclick="toggleView('list')" id="listViewBtn">
                                üìã List View
                            </button>
                            <button class="btn btn-outline" onclick="toggleView('card')" id="cardViewBtn">
                                üî≥ Card View
                            </button>
                        </div>
                    </div>

                    <!-- List View -->
                    <div id="listView" class="patient-list-view">
                        <table class="data-table" id="patientsTable">
                            <thead>
                                <tr>
                                    <th>Patient ID</th>
                                    <th>Name</th>
                                    <th>Age</th>
                                    <th>Gender</th>
                                    <th>Blood Type</th>
                                    <th>Risk Level</th>
                                    <th>Last Assessment</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="patientsTableBody">
                                <!-- Patient rows will be inserted here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Card View -->
                    <div id="cardView" class="patient-card-view" style="display: none;">
                        <div class="patient-cards-grid" id="patientCardsContainer">
                            <!-- Patient cards will be inserted here -->
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="no-data" style="display: none;">
                        <div class="empty-icon">üë§</div>
                        <h3>No Patients Found</h3>
                        <p>Start by adding your first patient to the registry.</p>
                        <button class="btn btn-primary" onclick="addNewPatient()">
                            <span>Add First Patient</span>
                        </button>
                    </div>
                </div>

                <!-- Bulk Actions (when patients are selected) -->
                <div id="bulkActions" class="dashboard-section" style="display: none;">
                    <div class="section-header">
                        <h2><span id="selectedCount">0</span> patients selected</h2>
                        <div class="bulk-controls">
                            <button class="btn btn-outline" onclick="bulkExport()">
                                üì§ Export Selected
                            </button>
                            <button class="btn btn-outline" onclick="bulkAssessment()">
                                ü©∫ Bulk Assessment
                            </button>
                            <button class="btn btn-secondary" onclick="clearSelection()">
                                ‚ùå Clear Selection
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 AetherFlow. All rights reserved.</p>
        </footer>
    </div>

    <!-- Patient Action Modal -->
    <div id="patientModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Patient Actions</h3>
                <span class="modal-close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Assessment Selection Modal -->
    <div id="assessmentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Start New Assessment</h3>
                <span class="modal-close" onclick="closeAssessmentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="assessmentPatientSelect">Select Patient:</label>
                    <select id="assessmentPatientSelect" class="form-select">
                        <option value="">Choose a patient...</option>
                    </select>
                </div>
                <div class="form-actions" style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="beginAssessment()">Begin Assessment</button>
                    <button class="btn btn-secondary" onclick="closeAssessmentModal()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/patients.js"></script>
</body>
</html>
